<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <title>DOMì—ì„œ ìš”ì†Œ ì œê±°</title>
    <style>
      [id^="practice"] {
        display: flex;
        flex-flow: column;
        align-items: start;
        gap: 12px;
        padding: 12px;

        * {
          margin-block: 0;
        }
      }

      h2 {
        font-size: 1.2rem;
      }

      hr {
        margin-block: 20px;
        margin-inline: 12px;
        border: 0;
        border-block-end: 1px solid #aaa;
      }

      .members,
      .reviews {
        list-style-type: "";
        padding-inline-start: 0;
        display: grid;
        gap: 8px;
        inline-size: calc(100vw - 64px);

        li {
          display: flex;
          justify-content: space-between;
          align-items: center;
          inline-size: inherit;
          border: 1px solid #444;
          border-radius: 4px;
          padding: 0.5rem;
          font-size: 14px;
        }

        &:empty + .info {
          display: block;
        }
      }

      .members button {
        cursor: pointer;
        border: 0;
        border-radius: 4px;
        padding: 6px 8px;
        background-color: #111;
        color: #fff;
        font-size: 12px;
      }

      .reviews {
        color: hsl(220 70% 35%);

        li {
          border-color: currentColor;

          &:has([aria-disabled="true"]) {
            color: hsla(0 0 15% / 0.5);
          }
        }

        button {
          cursor: pointer;
          border: 0;
          border-radius: 4px;
          padding: 0;
          background-color: transparent;
          color: inherit;
          inline-size: 20px;
          block-size: 20px;

          &[aria-disabled="true"] {
            cursor: not-allowed;
          }

          &:hover {
            background-color: hsla(200 50% 50% / 20%);
          }

          svg {
            pointer-events: none;
            inline-size: inherit;
            block-size: inherit;
          }
        }
      }

      .info {
        display: none;
        inline-size: calc(100vw - 60px);
        margin: 0;
        border: 1px solid hsl(186 84% 35%);
        background-color: hsla(186 84% 35% / 5%);
        border-radius: 4px;
        padding: 0.5rem;
        font-size: 14px;
      }
    </style>
  </head>

  <body>
    <section id="practice1">
      <h2>ğŸ§‘â€ğŸ¤â€ğŸ§‘ íŒ€ ë©¤ë²„</h2>
      <ul class="members">
        <li>ì´ì§€ì•„ <button type="button">ì œê±°</button></li>
        <li>ë°•í˜„ì¼ <button type="button">ì œê±°</button></li>
        <li>ìµœìƒì¤€ <button type="button">ì œê±°</button></li>
        <li>í•˜ì¤€ê²½ <button type="button">ì œê±°</button></li>
      </ul>
      <p class="info">íŒ€ ë©¤ë²„ê°€ ëª¨ë‘ ì‚¬ë¼ì¡ŒìŠµë‹ˆë‹¤. ğŸ˜³</p>
    </section>

    <script>
      //   // remove ë°©ì‹
      //   {
      //     const practice = document.getElementById("practice1");
      //     const members = practice.querySelector(".members");
      //     const info = practice.querySelector(".info");
      //     members.addEventListener("click", (e) => {
      //       const button = e.target.closest("button");
      //       if (!button) {
      //         return;
      //       }
      //       e.target.closest("li").remove();
      //       if (members.childElementCount < 1) {
      //         info.classList.remove("info");
      //       }
      //     });
      //   }

      // removeChild ë°©ì‹
      {
        // ìš”ì†Œë“¤ ì°¸ì¡°
        const practice = document.getElementById("practice1");
        const members = practice.querySelector(".members");
        const info = practice.querySelector(".info");

        // ì´ë²¤íŠ¸ ìœ„ì„ì„ ì‚¬ìš©í•˜ì—¬ ë²„íŠ¼ í´ë¦­ ì²˜ë¦¬
        members.addEventListener("click", (e) => {
          // í´ë¦­ëœ ìš”ì†Œê°€ ë²„íŠ¼ì¸ì§€ í™•ì¸
          const button = e.target.closest("button");
          if (!button) return; // ë²„íŠ¼ì´ ì•„ë‹ˆë©´ í•¨ìˆ˜ ì¢…ë£Œ

          // í´ë¦­ëœ ë²„íŠ¼ì˜ ìƒìœ„ li ìš”ì†Œ ì°¾ê¸°
          const listItem = button.closest("li");
          // ë¶€ëª¨ ìš”ì†Œì—ì„œ ìì‹ ìš”ì†Œ ì œê±°
          members.removeChild(listItem);

          // ëª¨ë“  ë©¤ë²„ê°€ ì œê±°ë˜ì—ˆëŠ”ì§€ í™•ì¸
          if (members.children.length < 1) {
            // info í´ë˜ìŠ¤ ì œê±°í•˜ì—¬ ë©”ì‹œì§€ í‘œì‹œ
            info.classList.remove("info");
          }
        });
      }
    </script>

    <hr />

    <article id="practice2">
      <h2>ğŸ’¬ ë¦¬ë·° ëª©ë¡</h2>
      <ul class="reviews">
        <li>
          ë§›ì´ ì •ë§ ì¢‹ì•„ìš”!
          <button
            type="button"
            aria-disabled="true"
            aria-label="ìœ„ë¡œ ì´ë™"
            title="ìœ„ë¡œ ì´ë™"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-square-chevron-up-icon lucide-square-chevron-up"
            >
              <rect width="18" height="18" x="3" y="3" rx="2" />
              <path d="m8 14 4-4 4 4" />
            </svg>
          </button>
        </li>
        <li>
          ë°°ì†¡ë„ ë¹ ë¥´ê³  í¬ì¥ë„ ê¹”ë”í•´ìš”.
          <button
            type="button"
            aria-disabled="false"
            aria-label="ìœ„ë¡œ ì´ë™"
            title="ìœ„ë¡œ ì´ë™"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-square-chevron-up-icon lucide-square-chevron-up"
            >
              <rect width="18" height="18" x="3" y="3" rx="2" />
              <path d="m8 14 4-4 4 4" />
            </svg>
          </button>
        </li>
        <li>
          ì¡°ë¦¬ë²•ì´ ì‰½ê³  ê°„í¸í•´ì„œ ì¢‹ì•„ìš”~
          <button
            type="button"
            aria-disabled="false"
            aria-label="ìœ„ë¡œ ì´ë™"
            title="ìœ„ë¡œ ì´ë™"
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="24"
              height="24"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
              class="lucide lucide-square-chevron-up-icon lucide-square-chevron-up"
            >
              <rect width="18" height="18" x="3" y="3" rx="2" />
              <path d="m8 14 4-4 4 4" />
            </svg>
          </button>
        </li>
      </ul>
    </article>

    <script>
      // ì‹¤ìŠµ 2. ìˆœì„œ ì´ë™
      // ê° ë¦¬ë·°ì˜ "ìœ„ë¡œ ì´ë™" ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ìœ„ ìš”ì†Œì™€ ìœ„ì¹˜ê°€ ë°”ë€Œë„ë¡ êµ¬í˜„í•©ë‹ˆë‹¤.
      // - ë§¨ ìœ„ì˜ ë¦¬ë·°ëŠ” ë¹„í™œì„± ìƒíƒœ(`aria-disabled="true"`)ë¡œ ì „í™˜
      // - ë¹„í™œì„± ìƒíƒœì¸ ê²½ìš°, ì´ˆì ì€ ì´ë™ë˜ë‚˜ ì‘ë™ë˜ì§€ ì•Šì•„ì•¼ í•¨
      {
        const practice = document.getElementById("practice2");
        const reviews = practice.querySelector(".reviews");

        reviews.addEventListener("click", (e) => {
          // í´ë¦­ëœ ë²„íŠ¼ ìš”ì†Œ ì°¾ê¸°
          const button = e.target.closest("button");
          // ë²„íŠ¼ì´ ì—†ê±°ë‚˜ ë¹„í™œì„±í™” ìƒíƒœë©´ í•¨ìˆ˜ ì¢…ë£Œ
          if (!button || button.getAttribute("aria-disabled") === "true") {
            return;
          }

          // í˜„ì¬ ë¦¬ë·° í•­ëª©ê³¼ ì´ì „ ë¦¬ë·° í•­ëª© ì°¾ê¸°
          const currentLi = button.closest("li");
          const previousLi = currentLi.previousElementSibling;

          if (previousLi) {
            // í˜„ì¬ ë¦¬ë·°ë¥¼ ì´ì „ ë¦¬ë·° ì•ìœ¼ë¡œ ì´ë™
            reviews.insertBefore(currentLi, previousLi);

            const previousButton = previousLi.querySelector("button");

            // ë§¨ ìœ„ë¡œ ì´ë™í•œ ê²½ìš° ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            if (!currentLi.previousElementSibling) {
              button.setAttribute("aria-disabled", "true");
              previousButton.setAttribute("aria-disabled", "false");
            }

            // ì´ë™ í›„ í˜„ì¬ ë²„íŠ¼ì— í¬ì»¤ìŠ¤ ìœ ì§€
            button.focus();
          }
        });
      }
    </script>
  </body>
</html>
