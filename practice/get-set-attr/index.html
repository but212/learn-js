<!DOCTYPE html>
<html lang="ko-KR">
  <head>
    <meta charset="UTF-8" />
    <title>ì†ì„± ì„¤ì •, ì½ê¸°, ì œê±° ì‹¤ìŠµ</title>
    <style>
      .product {
        border: 1px solid #ccc;
        padding: 1rem;
        margin-bottom: 1rem;
        font-size: 1rem;
      }

      .button {
        margin-right: 0.5rem;
      }
    </style>
    <script src="../../learn/utils/query-utils.js"></script>
  </head>
  <body>
    <div class="product" data-name="Red Sneakers" data-stock="3">
      ğŸ›ï¸ ì œí’ˆ: <span class="name">ë ˆë“œ ìŠ¤ë‹ˆì»¤ìŠ¤</span><br />
      ğŸ“¦ ì¬ê³ : <span class="stock">3</span>
    </div>

    <button type="button" class="button" id="read">ì†ì„± ì½ê¸°</button>
    <button type="button" class="button" id="update">ì¬ê³  ìˆ˜ì •</button>
    <button type="button" class="button" id="remove">ì†ì„± ì œê±°</button>

    <script>
      const ATTR_STOCK = "data-stock";
      const ATTR_NAME = "data-name";
      const product = document.querySelector(".product");
      const stockText = product.querySelector(".stock");
      // 1. "ì†ì„± ì½ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ, ì œí’ˆì˜ ì»¤ìŠ¤í…€ ì†ì„±ì„ ì½ì–´ ì½˜ì†” íŒ¨ë„ì— ì¶œë ¥í•©ë‹ˆë‹¤. (`getAttribute` í™œìš©)
      const attrReadButton = document.getElementById("read");
      attrReadButton.addEventListener("click", () => {
        console.log(product.getAttribute(ATTR_NAME));
        console.log(product.getAttribute(ATTR_STOCK));
      });

      // 2. "ì†ì„± ì½ê¸°" ë²„íŠ¼ í´ë¦­ ì‹œ, ì œí’ˆì˜ ì»¤ìŠ¤í…€ ì†ì„±ì„ ì½ì–´ ì½˜ì†” íŒ¨ë„ì— ì¶œë ¥í•©ë‹ˆë‹¤. (`dataset` í™œìš©)
      // 2. "dataset í™œìš©"ìœ¼ë¡œ ì œí’ˆ ì»¤ìŠ¤í…€ ì†ì„± ì½ê¸°
      attrReadButton.addEventListener("click", () => {
        console.log(product.dataset.name);
        console.log(product.dataset.stock);
      });

      // 3. "ì¬ê³  ìˆ˜ì •" ë²„íŠ¼ í´ë¦­ ì‹œ, í˜„ì¬ ì¬ê³  ê°’ì— 2ë¥¼ ë”í•œ ê°’ìœ¼ë¡œ ì„¤ì •í•˜ê³  "ğŸ“¦Â ì¬ê³ : 5"ë¡œ í™”ë©´ì— ë°˜ì˜í•©ë‹ˆë‹¤.
      const attrUpdateButton = document.getElementById("update");
      attrUpdateButton.addEventListener("click", () => {
        let stock = parseInt(product.getAttribute(ATTR_STOCK));

        if (!stock) {
          stock = 2;
        } else {
          stock = stock + 2;
        }

        product.setAttribute(ATTR_STOCK, stock.toString());
        stockText.textContent = stock;
      });

      // 4. "ì†ì„± ì œê±°" ë²„íŠ¼ í´ë¦­ ì‹œ, ì œí’ˆ `data-stock` ì†ì„±ì„ ì œê±°í•˜ê³ , "ğŸ“¦Â ì¬ê³ : ì—†ìŒ"ìœ¼ë¡œ í™”ë©´ì— ë°˜ì˜í•©ë‹ˆë‹¤.
      const attrRemoveButton = document.getElementById("remove");
      attrRemoveButton.addEventListener("click", () => {
        product.removeAttribute(ATTR_STOCK);
        stockText.textContent = "ì—†ìŒ";
      });
    </script>
  </body>
</html>
